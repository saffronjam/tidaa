#include "p18F4520.inc"
    
    CONFIG  OSC = HS
    CONFIG  PWRT = OFF
    CONFIG  WDT = OFF
    CONFIG  PBADEN = OFF
    CONFIG  LVP = OFF
    
TCOUNT	equ	0x000
    
	org	0x00000
	BRA	MAIN
	
	org	0x00008
	BTFSC	INTCON,TMR0IF
	CALL	T0_ISR
	RETFIE
	
	org	0x00020
MAIN	RCALL	MINIT
	BRA	$
	
MINIT	BCF	TRISA,RA1
	BSF	PORTA,RA1
	CLRF	TRISD
	MOVLW	b'01010101'
	MOVWF	PORTD	
	MOVLW	b'10000111'
	MOVWF	T0CON	
	MOVLW	b'10100010'
	MOVWF	INTCON
	SETF	TMR0H
	SETF	TMR0L	
	RCALL	T0RES
	RETURN
	
T0RES	BCF	INTCON,TMR0IF
	MOVLW	0xF6
	MOVWF	TMR0H
	MOVLW	0x3D
	MOVWF	TMR0L
	INCF	TCOUNT
	BTFSC	TCOUNT,2
	RCALL	LIGHTS
	RETURN

LIGHTS	CLRF	TCOUNT
	COMF	PORTD
	RETURN
	
T0_ISR	RCALL	T0RES
	RETURN
	
	end